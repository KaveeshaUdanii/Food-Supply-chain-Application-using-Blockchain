{% extends "base.html" %}

{% block content %}
<section class="hero">
  <div class="dashboard-container">

    <h2 style="color:#016A70; text-align:center; margin-bottom:24px;">Analytics & Stats</h2>

    <!-- Top stats cards -->
    <div class="grid stats-grid">
      <div class="card" style="background:#016A70; color:#FFFFDD;">
        <h3>Total Products</h3>
        <p>{{ total_products }}</p>
      </div>
      <div class="card" style="background:#D2DE32; color:#016A70;">
        <h3>Your Products</h3>
        <p>{{ user_products }}</p>
      </div>
      <div class="card" style="background:#A2C579; color:#016A70;">
        <h3>Temperature Violations</h3>
        <p>{{ temp_violations }}</p>
      </div>
      <div class="card" style="background:#FFFFDD; color:#016A70;">
        <h3>Humidity Violations</h3>
        <p>{{ humidity_violations }}</p>
      </div>
    </div>

    <!-- Charts -->
    <div class="grid charts-grid" style="margin-top:24px; gap:24px;">
      <div class="card">
        <h3>Products by Owner</h3>
        <div id="bar-chart" data-json='{{ bar_json | tojson | safe }}'></div>
      </div>

      <div class="card">
        <h3>Products by Status</h3>
        <div id="pie-chart" data-json='{{ pie_json | tojson | safe }}'></div>
      </div>

      <div class="card">
        <h3>Temperature Over Time</h3>
        <div id="line-chart" data-json='{{ line_json | tojson | safe }}'></div>
      </div>
    </div>

  </div>
</section>

<!-- Plotly JS -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="{{ url_for('static', filename='js/analytics.js') }}"></script>
{% endblock %}

