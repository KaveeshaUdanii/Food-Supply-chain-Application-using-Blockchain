{% extends "base.html" %}
{% block content %}
<section class="hero">
  <div class="container">
    <h2>Analytics & Stats</h2>

    <div class="grid" style="margin-top:24px;">
      <div class="card">
        <h3>Total Products</h3>
        <p>{{ total_products }}</p>
      </div>
      <div class="card">
        <h3>Your Products</h3>
        <p>{{ user_products }}</p>
      </div>
      <div class="card">
        <h3>Temperature Violations</h3>
        <p>{{ temp_violations }}</p>
      </div>
      <div class="card">
        <h3>Humidity Violations</h3>
        <p>{{ humidity_violations }}</p>
      </div>
    </div>

    <!-- Charts -->
    <div class="grid" style="margin-top:24px; gap:24px;">
      <div class="card">
        <h3>Products by Owner</h3>
        <div id="bar-chart" data-json='{{ bar_json | tojson | safe }}'></div>
      </div>

      <div class="card">
        <h3>Products by Status</h3>
        <div id="pie-chart" data-json='{{ pie_json | tojson | safe }}'></div>
      </div>

      <div class="card">
        <h3>Temperature Over Time</h3>
        <div id="line-chart" data-json='{{ line_json | tojson | safe }}'></div>
      </div>
    </div>
  </div>
</section>

<!-- Plotly JS -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="{{ url_for('static', filename='js/analytics.js') }}"></script>
{% endblock %}
